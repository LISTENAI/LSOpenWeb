<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.2">
<title data-react-helmet="true">OTA 协议说明 | 聆思文档中心</title><meta data-react-helmet="true" property="og:url" content="https://github.com/LISTENAI/serial_protocol"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="OTA 协议说明 | 聆思文档中心"><meta data-react-helmet="true" name="description" content="1.文档说明"><meta data-react-helmet="true" property="og:description" content="1.文档说明"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://github.com/LISTENAI/serial_protocol"><link data-react-helmet="true" rel="alternate" href="https://github.com/LISTENAI/serial_protocol" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://github.com/LISTENAI/serial_protocol" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.56affa13.css">
<link rel="preload" href="/assets/js/runtime~main.2029493e.js" as="script">
<link rel="preload" href="/assets/js/main.945e9b4a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="LSOpen Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.png" alt="LSOpen Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">聆思文档中心</b></a><a class="navbar__item navbar__link" href="/CSK_online_guides_home">离在线开发指南</a><a class="navbar__item navbar__link" href="/csksdk_api">API</a><a class="navbar__item navbar__link" href="/download">下载中心</a><a class="navbar__item navbar__link" href="/lisa">Hello Lisa</a><a class="navbar__item navbar__link" href="/school">视频教程</a></div><div class="navbar__items navbar__items--right"><a href="https://cloud.listenai.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>LSCloud<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_MM2z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_s5VG searchBarLoadingRing_2jQk"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="LSOpen Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.png" alt="LSOpen Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">聆思文档中心</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/CSK_online_guides_home">离在线开发指南</a></li><li class="menu__list-item"><a class="menu__link" href="/csksdk_api">API</a></li><li class="menu__list-item"><a class="menu__link" href="/download">下载中心</a></li><li class="menu__list-item"><a class="menu__link" href="/lisa">Hello Lisa</a></li><li class="menu__list-item"><a class="menu__link" href="/school">视频教程</a></li><li class="menu__list-item"><a href="https://cloud.listenai.com" target="_blank" rel="noopener noreferrer" class="menu__link"><span>LSCloud<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><main class="docMainContainer_3ufF docMainContainerEnhanced_3NYZ"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">OTA 协议说明</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="1文档说明"></a>1.文档说明<a class="hash-link" href="#1文档说明" title="Direct link to heading">#</a></h2><p>本文档描述了CSK4002的串口下载方法，通过串口的方式，将用户代码拷贝到RAM或者FLASH区域，可用于用户方案开发，并开放上位机和下位机代码以及协议解析。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="2数据格式解析"></a>2.数据格式解析<a class="hash-link" href="#2数据格式解析" title="Direct link to heading">#</a></h2><p>数据格式较为简单，主机发送由SLIP转化的数据请求到CSK4002芯片，再由CSK4002数据芯片回应刚才的请求给上位机（SLIP协议转化），本章主要描述了请求格式、回应格式、错误码以及指令码四个方面的内容。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="21底层传输协议"></a>2.1底层传输协议<a class="hash-link" href="#21底层传输协议" title="Direct link to heading">#</a></h3><p>底层传输协议采用SLIP传输协议，包头和包尾均由0xC0包裹，中间数据区域的0xC0和0xDB将会替换为0xDB 0xDC 和 0xDB 0xDD。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="22请求数据格式"></a>2.2请求数据格式<a class="hash-link" href="#22请求数据格式" title="Direct link to heading">#</a></h3><table><thead><tr><th>Byte</th><th>Name</th><th>Comment</th></tr></thead><tbody><tr><td>0</td><td>Direction</td><td>总是0x00</td></tr><tr><td>1</td><td>Command</td><td>参考<a href="#26%E6%8C%87%E4%BB%A4%E5%88%97%E8%A1%A8">指令列表</a></td></tr><tr><td>2-3</td><td>Size</td><td>Data数据区域的长度</td></tr><tr><td>4-7</td><td>Checksum</td><td>只有在FLASH_DATA 和 MEM_DATA两个指令有效，其他指令时都为0</td></tr><tr><td>8..n</td><td>Data</td><td>数据传输区域，当在Command为FLASH_DATA 和 MEM_DATA时，该区域遵守Data协议，其他指令则都直接将数据按位放在该区域</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="23回应数据格式"></a>2.3回应数据格式<a class="hash-link" href="#23回应数据格式" title="Direct link to heading">#</a></h3><table><thead><tr><th>Byte</th><th>Name</th><th>Comment</th></tr></thead><tbody><tr><td>0</td><td>Direction</td><td>总是0x01</td></tr><tr><td>1</td><td>Command</td><td>参考<a href="#26%E6%8C%87%E4%BB%A4%E5%88%97%E8%A1%A8">指令列表</a></td></tr><tr><td>2-3</td><td>Size</td><td>Data数据区域的长度</td></tr><tr><td>4-7</td><td>Value</td><td>0x00</td></tr><tr><td>8</td><td>Error</td><td>0x00表示成功，0x01表示失败</td></tr><tr><td>9</td><td>Status</td><td>如果传输失败时候的失败原因，否则为0x00</td></tr><tr><td>10-17</td><td>MD5</td><td>只有当发送过来的Command为SPI_FLASH_MD5时该区域才有效</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="24错误状态码"></a>2.4错误状态码<a class="hash-link" href="#24错误状态码" title="Direct link to heading">#</a></h3><table><thead><tr><th>Name</th><th>Data</th><th>Comment</th></tr></thead><tbody><tr><td>TRANSMIT_PASS</td><td>0x0</td><td>传输成功</td></tr><tr><td>DATA_STREAM_OVERFLOW</td><td>0x1</td><td>数据缓冲区溢出错误</td></tr><tr><td>TRANSFORM_FORMAT_ERROR</td><td>0x2</td><td>格式转化错误</td></tr><tr><td>ILLEGAL_DATA_PACKET</td><td>0x3</td><td>非法数据</td></tr><tr><td>CHECKSUM_FAILED</td><td>0x4</td><td>数据校验错误</td></tr><tr><td>COMMAND_SEQUENCE_ERROR</td><td>0x5</td><td>指令顺序错误</td></tr><tr><td>DATA_ID_SEQUENCE_ERROR</td><td>0x6</td><td>数据指令ID顺序错误</td></tr><tr><td>FLASH_ERROR</td><td>0x8</td><td>FLASH写入错误</td></tr><tr><td>UNSUPPORT_COMMAND</td><td>0x9</td><td>未支持指令</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="25data区域数据格式"></a>2.5Data区域数据格式<a class="hash-link" href="#25data区域数据格式" title="Direct link to heading">#</a></h3><table><thead><tr><th>Byte</th><th>Name</th><th>Comment</th></tr></thead><tbody><tr><td>0-3</td><td>Data Length</td><td>Data To Write区域的数据长度</td></tr><tr><td>4-7</td><td>Number</td><td>从0开始的数据编号</td></tr><tr><td>8-15</td><td>0</td><td></td></tr><tr><td>16..n</td><td>Data To Write</td><td>数据负载，最大负载为PROXY_UART_RX_MAX ROM通讯时则为 ROM_UART_RX_MAX</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="26指令列表"></a>2.6指令列表<a class="hash-link" href="#26指令列表" title="Direct link to heading">#</a></h3><table><thead><tr><th>Command</th><th>Data</th><th>Description</th><th>Input Data</th></tr></thead><tbody><tr><td>FLASH_BEGIN</td><td>0x02</td><td>开始FLASH下载</td><td>总共4个WORD数据，分别为：总传输大小；传输PACKET数量；每个PACKET大小；起始地址（绝对地址）</td></tr><tr><td>FLASH_DATA</td><td>0x03</td><td>FLASH下载数据</td><td>参考<a href="#25data%E5%8C%BA%E5%9F%9F%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F">Data区域</a></td></tr><tr><td>FLASH_END</td><td>0x04</td><td>FLASH下载结束</td><td>只有1个WORD数据<br>0x00：表示下载完成后下位机自动重启<br>0x02：表示下载完成后下位机仍然运行</td></tr><tr><td>MEM_BEGIN</td><td>0x05</td><td>开始Memory下载</td><td>总共4个WORD数据，分别为：总传输大小；传输PACKET数量；每个PACKET大小；起始地址（绝对地址）</td></tr><tr><td>MEM_END</td><td>0x06</td><td>Memory下载结束</td><td>总共2个WORD数据，第一个WORD<br>0x00：表示下载完成后下位机自动重启<br>0x01：表示下载完成后跳转到第二个WORD数据的地址<br>第二个WORD只有在第一个WORD为0x01时有效<br>0x02：表示下载完成后下位机仍然运行</td></tr><tr><td>MEM_DATA</td><td>0x07</td><td>Memory下载数据</td><td>参考<a href="#25data%E5%8C%BA%E5%9F%9F%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F">Data区域</a></td></tr><tr><td>SYNC</td><td>0x08</td><td>同步</td><td>同步信号，总共36 WORD数据：0x07 0x07 0x12 0x20 在跟32个 0x55</td></tr><tr><td>CHANGE_BAUDRATE</td><td>0x0f</td><td>改变波特率</td><td>总共有2个WORD 参数，分别为改变的波特率；当前的波特率</td></tr><tr><td>SPI_FLASH_MD5</td><td>0x13</td><td>MD5校验</td><td>总共有4个WORD参数，分别是：校验起始位置（绝对地址）；校验大小；0；0；</td></tr><tr><td>ERASE_FLASH</td><td>0xd0</td><td>擦除整个FLASH</td><td>无</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="3传输过程"></a>3.传输过程<a class="hash-link" href="#3传输过程" title="Direct link to heading">#</a></h2><p>串口下载的整个过程，分为ROM通讯、建立代理、数据下载三个部分，每个部分都会涉及上一章提及的传输格式。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="31rom通讯"></a>3.1ROM通讯<a class="hash-link" href="#31rom通讯" title="Direct link to heading">#</a></h3><p>CSK4002芯片上电，会直接进入ROM程序，在ROM程序未检出FLASH上面有image文件时，会自动进入UART接收等待，具体逻辑见下图。</p><p><img src="/assets/images/rom_boot_flow-309af5ff934d7f25a94321ae41dbec50.png"></p><p>在ROM阶段发送SYNC指令，可以检查ROM是否进入UART等待接收阶段，这样便于后续的代理建立。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="32建立代理"></a>3.2建立代理<a class="hash-link" href="#32建立代理" title="Direct link to heading">#</a></h3><p>代理文件源码，见本文目录下的fireware文件夹，下载代理的目的在于将程序运行控制权，从ROM区域转移到代理区域，并支持FLASH下载，波特率切换，MD5校验等功能。</p><p>上位机可以通过发送MEM_BEGIN、MEM_DATA将代理文件发送至ROM侧，ROM UART接收代码会将该文件加载到SRAM区域，最后通过MEM_END，在发送结束的时候将程序的控制权完全交给代理。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="33数据下载"></a>3.3数据下载<a class="hash-link" href="#33数据下载" title="Direct link to heading">#</a></h3><p>当控制权完全由下载代理掌控后，指令列表里的所有指令都可以使用，用户可以在这个阶段进行FLASH下载，RAM下载，切换波特率，MD5校验等。</p><p>下面几节都会介绍各个指令的数据格式内容，但是都未进行SLIP处理，在实际数据发送的时候都需要进行SLIP处理，相关SLIP处理代码详见pc_tool文档内protocol目录下的slip文件夹。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="flash下载"></a>FLASH下载<a class="hash-link" href="#flash下载" title="Direct link to heading">#</a></h4><p>FLASH下载过程中，可以使用 FLASH_BEGIN、FLASH_DATA、FLASH_END三个指令。每发送一包数据，都需要上位机等待接收回应。</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="flash_begin"></a>FLASH_BEGIN<a class="hash-link" href="#flash_begin" title="Direct link to heading">#</a></h5><table><thead><tr><th>Byte</th><th>Name</th><th>Data</th></tr></thead><tbody><tr><td>0</td><td>Direction</td><td>0x00</td></tr><tr><td>1</td><td>Command</td><td>0x02</td></tr><tr><td>2-3</td><td>Size</td><td>0x00 0x18</td></tr><tr><td>4-7</td><td>Checksum</td><td>0xXX 0xXX 0xXX 0xXX</td></tr><tr><td>8-11</td><td>Total</td><td>0xXX 0xXX 0xXX 0xXX（根据需要传输的数据量来定，无对齐要求）</td></tr><tr><td>12-15</td><td>Packet Number</td><td>0xXX 0xXX 0xXX 0xXX（需要传输的Packet数据量）</td></tr><tr><td>16-19</td><td>Packet Size</td><td>0xXX 0xXX 0xXX 0xXX（每一个Packet的负载大小）</td></tr><tr><td>20-23</td><td>Address</td><td>0xXX 0xXX 0xXX 0xXX（FLASH下载数据的起始地址，使用CSK4002芯片，该起始地址大于0x8000 0000 小于 0x8080 0000）</td></tr></tbody></table><p>该数据包只需要传输一次，将接下来需要传输的信息通知代理</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="flash_data"></a>FLASH_DATA<a class="hash-link" href="#flash_data" title="Direct link to heading">#</a></h5><table><thead><tr><th>Byte</th><th>Name</th><th>Data</th></tr></thead><tbody><tr><td>0</td><td>Direction</td><td>0x00</td></tr><tr><td>1</td><td>Command</td><td>0x03</td></tr><tr><td>2-3</td><td>Size</td><td>0xXX 0xXX</td></tr><tr><td>4-7</td><td>Checksum</td><td>0xXX 0xXX 0xXX 0xXX</td></tr><tr><td>8-11</td><td>Data Length</td><td>0xXX 0xXX 0xXX 0xXX（根据需要传输的数据量来定，无对齐要求）</td></tr><tr><td>12-15</td><td>Number</td><td>0xXX 0xXX 0xXX 0xXX（默认从0开始，每发送一个FLASH_DATA则加一，直到发送FLASH_END才清空）</td></tr><tr><td>16-23</td><td>NULL</td><td>0x0</td></tr><tr><td>24..n</td><td>Data To Write</td><td>需要发送的数据</td></tr></tbody></table><p>该指令会根据数据大小发送多次，每次该数据包的负载都是固定且不会特别巨大，避免因为数据错误导致重传浪费时间</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="flash_end"></a>FLASH_END<a class="hash-link" href="#flash_end" title="Direct link to heading">#</a></h5><table><thead><tr><th>Byte</th><th>Name</th><th>Data</th></tr></thead><tbody><tr><td>0</td><td>Direction</td><td>0x00</td></tr><tr><td>1</td><td>Command</td><td>0x04</td></tr><tr><td>2-3</td><td>Size</td><td>0xXX 0xXX</td></tr><tr><td>4-7</td><td>Checksum</td><td>0xXX 0xXX 0xXX 0xXX</td></tr><tr><td>8-11</td><td>Flag</td><td>根据需求发送，详见 指令列表</td></tr></tbody></table><p>该指令只需要发送一次，发送完成及表示数据发送完成</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ram-下载"></a>RAM 下载<a class="hash-link" href="#ram-下载" title="Direct link to heading">#</a></h4><p>类似于FLASH下载，只是将FLASH_BEGIN、 FLASH_DATA、 FLASH_END换成MEM_BEGIN 、MEM_DATA、 MEM_END。</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="波特率切换"></a>波特率切换<a class="hash-link" href="#波特率切换" title="Direct link to heading">#</a></h5><table><thead><tr><th>Byte</th><th>Name</th><th>Data</th></tr></thead><tbody><tr><td>0</td><td>Direction</td><td>0x00</td></tr><tr><td>1</td><td>Command</td><td>0x0f</td></tr><tr><td>2-3</td><td>Size</td><td>0x00 0x10</td></tr><tr><td>4-7</td><td>Checksum</td><td>0xXX 0xXX 0xXX 0xXX</td></tr><tr><td>8-11</td><td>New</td><td>0xXX 0xXX 0xXX 0xXX（需要更改的波特率）</td></tr><tr><td>12-15</td><td>Old</td><td>0xXX 0xXX 0xXX 0xXX（当前波特率）</td></tr></tbody></table><p>切换波特率需要注意的地方在于，该指令的数据发送和接收都依旧采用老的波特率，所以上位机需要在下位机回应完成后再切换当前波特率。默认的通讯波特率是115200，最高可以切换到3Mb的波特率。</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="md5校验"></a>MD5校验<a class="hash-link" href="#md5校验" title="Direct link to heading">#</a></h5><table><thead><tr><th>Byte</th><th>Name</th><th>Data</th></tr></thead><tbody><tr><td>0</td><td>Direction</td><td>0x00</td></tr><tr><td>1</td><td>Command</td><td>0x13</td></tr><tr><td>2-3</td><td>Size</td><td>0x00 0x18</td></tr><tr><td>4-7</td><td>Checksum</td><td>0xXX 0xXX 0xXX 0xXX</td></tr><tr><td>8-11</td><td>Address</td><td>0xXX 0xXX 0xXX 0xXX（校验起始地址）</td></tr><tr><td>12-15</td><td>Size</td><td>0xXX 0xXX 0xXX 0xXX（需要校验的大小）</td></tr><tr><td>16-19</td><td>0</td><td>NULL</td></tr><tr><td>20-23</td><td>0</td><td>NULL</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="4通讯流程图"></a>4.通讯流程图<a class="hash-link" href="#4通讯流程图" title="Direct link to heading">#</a></h2><p><img src="/assets/images/liucheng-15244884be9fe6187ff660230ae64619.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="5代理性能评估"></a>5.代理性能评估<a class="hash-link" href="#5代理性能评估" title="Direct link to heading">#</a></h2><table><tr><th rowspan="3" align="center">含下载代理、无MD5校验</th><th align="center">波特率</th><th align="center">1M</th><th align="center">2M</th><th align="center">3M</th><th align="center">速度</th></tr><tr><th align="center">1536000</th><th align="center">24s</th><th align="center">42s</th><th align="center">60s</th><th align="center">21s/M</th></tr><tr><th align="center">3000000</th><th align="center">21s</th><th align="center">37s</th><th align="center">52s</th><th align="center">18.3s/M</th></tr><tr><th rowspan="2" align="center">测试同上，传输大小为8K一包</th><th align="center">1536000</th><th align="center">20s</th><th align="center">33s</th><th align="center">46s</th><th align="center">16.5s/M</th></tr><tr><th align="center">3000000</th><th align="center">20s</th><th align="center">34s</th><th align="center">46-47s</th><th align="center">16.6s/M</th></tr><tr><th rowspan="3" align="center">含下载代理、MD5校验</th><th align="center">波特率</th><th align="center">1M</th><th align="center">2M</th><th align="center">3M</th><th align="center">速度</th></tr><tr><th align="center">1536000</th><th align="center">25s</th><th align="center">43s</th><th align="center">61s</th><th align="center">21.5s/M</th></tr><tr><th align="center">3000000</th><th align="center">22s</th><th align="center">37s</th><th align="center">53s</th><th align="center">18.67s/M</th></tr><tr><th rowspan="2" align="center">测试同上，传输大小为8K一包</th><th align="center">1536000</th><th align="center"></th><th align="center"></th><th align="center">48s</th><th align="center"></th></tr><tr><th align="center">3000000</th><th align="center"></th><th align="center"></th><th align="center"></th><th align="center"></th></tr><tr><th rowspan="3" align="center">不含代理、无MD5校验</th><th align="center">波特率</th><th align="center">1M</th><th align="center">2M</th><th align="center">3M</th><th align="center">速度</th></tr><tr><th align="center">1536000</th><th align="center">19s</th><th align="center">36s</th><th align="center">54s</th><th align="center">18.17s/M</th></tr><tr><th align="center">3000000</th><th align="center">17s</th><th align="center">32s</th><th align="center">47s</th><th align="center">16s/M</th></tr><tr><th rowspan="2" align="center">测试同上，传输大小为8K一包</th><th align="center">1536000</th><th align="center"></th><th align="center"></th><th align="center">45s</th><th align="center">15s/M</th></tr><tr><th align="center">3000000</th><th align="center">16s</th><th align="center">29s</th><th align="center">42s</th><th align="center">14.5s/M</th></tr><tr><th rowspan="3" align="center">不含代理、有MD5校验</th><th align="center">波特率</th><th align="center">1M</th><th align="center">2M</th><th align="center">3M</th><th align="center">速度</th></tr><tr><th align="center">1536000</th><th align="center">20s</th><th align="center">37s</th><th align="center">55s</th><th align="center">18.67s/M</th></tr><tr><th align="center">3000000</th><th align="center">17s</th><th align="center">33s</th><th align="center">48s</th><th align="center">16.3s/M</th></tr><tr><th colspan="6" align="left">Note:3M波特率传输存在一定的不稳定性，会有重传现象，所以测量时间会有一定的波动</th></tr><tr><th colspan="6" align="left">当采用8K数据包的时候，明显下位机的烧录远远慢于传输，在传输flash end会有很长的时间去等待下位机去烧写数据</th></tr></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="6参数"></a>6.参数<a class="hash-link" href="#6参数" title="Direct link to heading">#</a></h2><p>代理程序内的数据通讯BUFFER大小参数，通讯数据包不能大于这个值</p><p>PROXY_UART_RX_MAX 16384 Bytes</p><p>ROM程序内的数据通讯BUFFER大小参数，通讯数据包不能大于这个值</p><p>ROM_UART_RX_MAX 2048 Bytes</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1文档说明" class="table-of-contents__link">1.文档说明</a></li><li><a href="#2数据格式解析" class="table-of-contents__link">2.数据格式解析</a><ul><li><a href="#21底层传输协议" class="table-of-contents__link">2.1底层传输协议</a></li><li><a href="#22请求数据格式" class="table-of-contents__link">2.2请求数据格式</a></li><li><a href="#23回应数据格式" class="table-of-contents__link">2.3回应数据格式</a></li><li><a href="#24错误状态码" class="table-of-contents__link">2.4错误状态码</a></li><li><a href="#25data区域数据格式" class="table-of-contents__link">2.5Data区域数据格式</a></li><li><a href="#26指令列表" class="table-of-contents__link">2.6指令列表</a></li></ul></li><li><a href="#3传输过程" class="table-of-contents__link">3.传输过程</a><ul><li><a href="#31rom通讯" class="table-of-contents__link">3.1ROM通讯</a></li><li><a href="#32建立代理" class="table-of-contents__link">3.2建立代理</a></li><li><a href="#33数据下载" class="table-of-contents__link">3.3数据下载</a></li></ul></li><li><a href="#4通讯流程图" class="table-of-contents__link">4.通讯流程图</a></li><li><a href="#5代理性能评估" class="table-of-contents__link">5.代理性能评估</a></li><li><a href="#6参数" class="table-of-contents__link">6.参数</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 安徽聆思智能科技有限公司皖ICP备05001217号</div></div></div></footer></div>
<script src="/assets/js/runtime~main.2029493e.js"></script>
<script src="/assets/js/main.945e9b4a.js"></script>
</body>
</html>